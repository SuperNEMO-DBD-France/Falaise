digraph FLTagsConfRes1 {
	node [shape=box]
	## graph [splines=ortho]
	compound=true;
	subgraph cluster_confres {
		label="Configuration resources"
		fontname="bold";
		labeljust="left";
		subgraph cluster_expsetup {
			label="Description of the experiment";
			labeljust="left";
			fontname="bold";
			color="blue";
			// Vertices:
			tagExperiment [label="experiment"];
			tagGeometryService [label="geometry"];
			tagDevicesServices [label="devices"];
			tagExpSetupServices [label="services"];
			tagExpSetup [label="experimental setup";
			      style="filled";
			      fillcolor="lightblue"];
			// Edges:
			tagGeometryService  -> tagExperiment [label=" dependency ", fontsize=8];
			tagDevicesServices  -> tagExperiment [label=" dependency ", fontsize=8];
			tagExpSetupServices -> tagGeometryService [label=" dependency ", fontsize=8];
			tagExpSetupServices -> tagDevicesServices [label=" dependency ", fontsize=8];
			tagExpSetup         -> tagExpSetupServices [label=" dependency ", fontsize=8];
		}
		// Vertices:
		tagGenDecays [label="decay generation"];
		tagGenVertex [label="vertex generation"];
		tagGeant4 [label="Geant4 session"];
		tagSimSetupServices [label="services"];
		tagSimSetup [label="simulation setup"];
		tagRecSetupServices [label="services"];
		tagRecSetup [label="reconstruction setup"];
		tagRecPipeline [label="pipeline"];
		// Edges:
		tagSimSetup -> tagExpSetup [label=" dependency ", fontsize=8, color="black"];
		tagSimSetup -> tagGenVertex [label=" dependency ", fontsize=8];
		tagSimSetup -> tagGenDecays [label=" dependency ", fontsize=8];
		tagSimSetup -> tagGeant4 [label=" dependency ", fontsize=8];
		tagSimSetup -> tagSimSetupServices [label=" dependency ", fontsize=8];
		tagRecSetup -> tagExpSetup [label=" dependency ", fontsize=8, color="black"];
		tagRecSetup -> tagRecPipeline [label=" dependency ", fontsize=8];
		tagRecSetup -> tagRecSetupServices [label=" dependency ", fontsize=8];
		tagSimSetupServices -> tagGeometryService [label=" dependency ", fontsize=8];
		tagSimSetupServices -> tagDevicesServices [label=" dependency ", fontsize=8];
		tagRecSetupServices -> tagGeometryService [label=" dependency ", fontsize=8];
		tagRecSetupServices -> tagDevicesServices [label=" dependency ", fontsize=8];
		tagGenVertex -> tagSimSetupServices [label=" dependency ", fontsize=8];
		tagGeant4 -> tagSimSetupServices [label=" dependency ", fontsize=8];
		tagGeant4 -> tagGenVertex [label=" dependency ", fontsize=8];
		tagGeant4 -> tagGenDecays [label=" dependency ", fontsize=8];
		tagRecPipeline -> tagRecSetupServices [label=" dependency ", fontsize=8];
	}

	subgraph cluster_dataprocessingflow {
		rankdir="LR";
		label="Data processing flow";
		labeljust="left";
		fontname="bold";
		// Vertices:
		tagFLSimulate     [label="FLSimulate"];
		tagMonteCarloData [shape="note", label="Monte Carlo data\n+ metadata"];
		tagRecData        [shape="note", label="Reconstructed data\n+ metadata"];
		tagFLReconstruct  [label="FLReconstruct"];
		// Edges:
		tagFLSimulate     -> tagMonteCarloData [constraint=none, label=" output ", fontsize=8];
		tagMonteCarloData -> tagFLReconstruct  [constraint=none, label=" input ", fontsize=8, weight=4];
		tagFLReconstruct  -> tagRecData        [constraint=none, label=" output ", fontsize=8];
		{ rank=same;
			tagFLSimulate tagMonteCarloData tagFLReconstruct tagRecData ;
			rankdir="LR"}
	}
	// Edges:
	tagFLSimulate     -> tagSimSetup [label=" use ", fontsize=8];
	tagFLReconstruct  -> tagRecSetup [label=" use ", fontsize=8];
	tagMonteCarloData -> tagSimSetup [label=" context ", style=dashed, fontsize=8, color="black"];
	tagRecData        -> tagRecSetup [label=" context ", style=dashed, fontsize=8, color="black"];
}